(function(t){function e(e){for(var r,a,i=e[0],s=e[1],u=e[2],l=0,d=[];l<i.length;l++)a=i[l],Object.prototype.hasOwnProperty.call(c,a)&&c[a]&&d.push(c[a][0]),c[a]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r]);f&&f(e);while(d.length)d.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,a=1;a<n.length;a++){var i=n[a];0!==c[i]&&(r=!1)}r&&(o.splice(e--,1),t=s(s.s=n[0]))}return t}var r={},a={app:0},c={app:0},o=[];function i(t){return s.p+"js/"+({}[t]||t)+"."+{"chunk-07a8a3f0":"8c46ac09","chunk-25f75089":"454532f5","chunk-2d22d746":"fc58e2ae","chunk-3db8c01f":"3e6cd2fc","chunk-4185d04d":"da8a7a27","chunk-53ad5bc7":"5cd2799a","chunk-596a357f":"607781ad","chunk-62c012ea":"6c909d8a","chunk-66b27f02":"449bf3d4","chunk-8598445e":"818252a1"}[t]+".js"}function s(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(t){var e=[],n={"chunk-07a8a3f0":1,"chunk-25f75089":1,"chunk-3db8c01f":1,"chunk-4185d04d":1,"chunk-53ad5bc7":1,"chunk-596a357f":1,"chunk-62c012ea":1,"chunk-66b27f02":1,"chunk-8598445e":1};a[t]?e.push(a[t]):0!==a[t]&&n[t]&&e.push(a[t]=new Promise((function(e,n){for(var r="css/"+({}[t]||t)+"."+{"chunk-07a8a3f0":"32c2eecf","chunk-25f75089":"32c2eecf","chunk-2d22d746":"31d6cfe0","chunk-3db8c01f":"145309da","chunk-4185d04d":"32c2eecf","chunk-53ad5bc7":"067e88ef","chunk-596a357f":"bfc4893d","chunk-62c012ea":"32c2eecf","chunk-66b27f02":"aa278bc3","chunk-8598445e":"32c2eecf"}[t]+".css",c=s.p+r,o=document.getElementsByTagName("link"),i=0;i<o.length;i++){var u=o[i],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===r||l===c))return e()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){u=d[i],l=u.getAttribute("data-href");if(l===r||l===c)return e()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=e,f.onerror=function(e){var r=e&&e.target&&e.target.src||c,o=new Error("Loading CSS chunk "+t+" failed.\n("+r+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=r,delete a[t],f.parentNode.removeChild(f),n(o)},f.href=c;var p=document.getElementsByTagName("head")[0];p.appendChild(f)})).then((function(){a[t]=0})));var r=c[t];if(0!==r)if(r)e.push(r[2]);else{var o=new Promise((function(e,n){r=c[t]=[e,n]}));e.push(r[2]=o);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=i(t);var d=new Error;u=function(e){l.onerror=l.onload=null,clearTimeout(f);var n=c[t];if(0!==n){if(n){var r=e&&("load"===e.type?"missing":e.type),a=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+r+": "+a+")",d.name="ChunkLoadError",d.type=r,d.request=a,n[1](d)}c[t]=void 0}};var f=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(e)},s.m=t,s.c=r,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(n,r,function(e){return t[e]}.bind(null,r));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/",s.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=e,u=u.slice();for(var d=0;d<u.length;d++)e(u[d]);var f=l;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";n("85ec")},"07a6":function(t,e,n){t.exports=n.p+"img/login.381ba5a7.png"},"3d6d":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=n("5c96"),c=n.n(a),o=(n("0fae"),n("b2d6")),i=n.n(o),s=n("755e"),u=(n("d3b7"),n("3ca3"),n("ddb0"),n("7db0"),n("caad"),n("2532"),n("8c4f")),l=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"home"},[r("div",{staticClass:"carousel"},[r("div",{staticClass:"carousel-content"},[r("div",{staticStyle:{"font-size":"55px",color:"white","font-weight":"300",padding:"10px 0"}},[t._v(" Nuts & Cereals")]),r("div",{staticStyle:{color:"white","max-width":"489px"}},[t._v('These species are sometimes called "blueberries" and sold as blueberry jam or other products.')]),r("el-button",{staticStyle:{margin:"20px",padding:"15px 60px"},attrs:{type:"success"}},[t._v(" Shop Now")])],1)]),r("div",{staticClass:"popular-product",staticStyle:{padding:"30px 0"}},[r("div",{staticClass:"product-title",staticStyle:{"font-size":"32px",margin:"32px"}},[t._v(" Popular products")]),r("el-row",{attrs:{gutter:20}},t._l(t.allProducts,(function(e,a){return r("el-col",{key:a,staticStyle:{padding:"0 15px"},attrs:{span:6}},[r("div",{staticClass:"product"},[r("div",{staticClass:"product-img"},[e.img?r("img",{attrs:{src:e.img}}):r("img",{attrs:{src:n("901c"),alt:""}})]),r("div",{staticClass:"product-name"},[t._v(t._s(e.name))]),r("div",{staticClass:"product-price"},[t._v("$"+t._s(e.price))]),r("div",{staticClass:"product-buy"},[r("el-button",{attrs:{type:"success"},on:{click:function(n){return t.addToCart(e)}}},[t._v("Add To Cart")])],1)])])})),1)],1)])},d=[],f=(n("b0c0"),{name:"Home",data:function(){return{}},methods:{addToCart:function(t){this.$store.dispatch("cart",{cart:{name:t.name,_id:t._id,price:t.price,num:1,quantity:t.quantity,img:t.img}}),this.alertSuccess()},alertErr:function(t){this.$message({showClose:!0,message:t.message||"Đã có lỗi xảy ra!",type:"error"})},alertSuccess:function(){this.$message({showClose:!0,message:"Thêm vào giỏ hàng thành công!",type:"success"})}},created:function(){this.$store.dispatch("fetchProducts")},computed:{allProducts:function(){return this.$store.state.products}}}),p=f,h=(n("b8a9"),n("2877")),m=Object(h["a"])(p,l,d,!1,null,"890e39d8",null),g=m.exports;r["default"].use(u["a"]);var v=[{path:"/",name:"Home",component:g},{path:"/about",name:"About",component:function(){return n.e("chunk-2d22d746").then(n.bind(null,"f820"))}},{path:"/berries",component:function(){return n.e("chunk-07a8a3f0").then(n.bind(null,"3927"))}},{path:"/cereals",component:function(){return n.e("chunk-4185d04d").then(n.bind(null,"8e89"))}},{path:"/milk",component:function(){return n.e("chunk-25f75089").then(n.bind(null,"0a23"))}},{path:"/nuts",component:function(){return n.e("chunk-8598445e").then(n.bind(null,"d174"))}},{path:"/vegetables",component:function(){return n.e("chunk-62c012ea").then(n.bind(null,"86a3"))}},{path:"/order",name:"Order",component:function(){return n.e("chunk-3db8c01f").then(n.bind(null,"cf2a"))}},{path:"/login",component:function(){return n.e("chunk-596a357f").then(n.bind(null,"a55b"))}},{path:"/history",component:function(){return n.e("chunk-66b27f02").then(n.bind(null,"3c9d"))}},{path:"/history/product-list",component:function(){return n.e("chunk-53ad5bc7").then(n.bind(null,"33ac"))}}],b=new u["a"]({mode:"history",base:"/",routes:v});b.beforeEach((function(t,e,n){var r=localStorage.getItem("cus_accessToken"),a=["/history",["/order"]];!r&&a.find((function(e){return t.path.includes(e)}))?n("/"):n()}));var k=b,_=n("2f62"),y=n("bc3a"),C=n.n(y),O="https://gv-grocery-api.herokuapp.com",S=C.a.create({baseURL:O,timeout:3e4,withCredentials:!1});function w(){return{Authorization:"Bearer "+JSON.parse(localStorage.getItem("accessToken"))}}S.interceptors.request.use((function(t){return Object.assign(t.headers,w()),t}));var T={fetchProducts:function(t){return new Promise((function(e,n){S.get("".concat(O,"/products")).then((function(n){t.commit("FETCH_PRODUCTS",n.data),e(n)})).catch((function(t){n(t)}))}))},getOrderHistory:function(t,e){return new Promise((function(n,r){S.get("".concat(O,"/getOrderByUsername/").concat(e)).then((function(e){t.commit("GET_ORDER_HISTORY",e.data),n(e)})).catch((function(t){r(t)}))}))},cart:function(t,e){t.commit("CART",e.cart)},removeOrderLine:function(t,e){t.commit("REMOVE_ORDER_LINE",e)},logIn:function(t,e){return new Promise((function(n,r){S.post("".concat(O,"/cusLogin"),e).then((function(e){t.commit("CUS_LOGIN",e.data.customer),localStorage.setItem("cus_accessToken",JSON.stringify(e.data.accessToken)),localStorage.setItem("customer",JSON.stringify(e.data.customer)),n(e)})).catch((function(t){r(t.response.data)}))}))},logOut:function(t){localStorage.removeItem("cus_accessToken"),localStorage.removeItem("customer"),t.commit("LOG_OUT")}},x=(n("d81d"),n("4de4"),{FETCH_PRODUCTS:function(t,e){t.products=e},CART:function(t,e){var n=t.cart.map((function(t){return t._id})).indexOf(e._id);-1!==n?t.cart[n].num++:t.cart.push(e)},REMOVE_ORDER_LINE:function(t,e){t.cart=t.cart.filter((function(t){return t._id!==e}))},GET_ORDER_HISTORY:function(t,e){t.orderHistory=e},CUS_LOGIN:function(t,e){t.customer=e},LOG_OUT:function(t){t.customer={}}});r["default"].use(_["a"]);var E=JSON.parse(localStorage.getItem("customer")),R=new _["a"].Store({state:{BASE_URL:O,customer:E||{},products:[],cart:[],orderHistory:[]},mutations:x,actions:T}),$=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("div",{staticClass:"header"},[r("div",{staticClass:"logo",on:{click:t.goBack}},[r("img",{attrs:{src:n("9b19"),alt:""}})]),r("div",{staticStyle:{display:"flex"}},[r("div",{staticClass:"shopping-cart",on:{click:function(e){t.dialogTableVisible=!0}}},[r("el-badge",{staticClass:"item",attrs:{value:t.cart.length,hidden:0===t.cart.length}},[r("div",{staticClass:"icon"},[r("img",{attrs:{src:n("c000"),alt:""}})])]),r("div",{staticClass:"title"},[t._v("Shopping Cart")])],1),0===Object.keys(this.customer).length?r("div",{staticClass:"login",on:{click:t.toLoginPage}},[t._m(0)]):r("el-dropdown",{staticClass:"menu-user",attrs:{trigger:"click"}},[r("span",{staticClass:"el-dropdown-link",staticStyle:{cursor:"pointer"}},[t._v(" "+t._s(t.customer.username)),r("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",{staticStyle:{cursor:"pointer"},attrs:{icon:"el-icon-s-order"},nativeOn:{click:function(e){return t.toOrderHistory.apply(null,arguments)}}},[t._v("Order History")]),r("el-dropdown-item",{staticStyle:{cursor:"pointer"},attrs:{icon:"el-icon-switch-button"},nativeOn:{click:function(e){return t.logOut.apply(null,arguments)}}},[t._v("Log Out")])],1)],1)],1),r("el-dialog",{attrs:{title:"SHOPPING CART",visible:t.dialogTableVisible},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[t.cart.length?r("div",[t._l(t.cart,(function(e){return r("div",{key:e._id,staticClass:"cart-detail"},[r("div",{staticClass:"product-img"},[e.img?r("img",{attrs:{src:e.img}}):r("img",{attrs:{src:n("901c"),alt:""}})]),r("div",{staticClass:"product-detail"},[r("div",{staticClass:"product-name"},[t._v(t._s(e.name))]),r("el-input-number",{attrs:{size:"small",min:1,max:e.quantity},model:{value:e.num,callback:function(n){t.$set(e,"num",n)},expression:"c.num"}}),r("div",{staticClass:"product-price"},[t._v("$"+t._s(e.price))])],1),r("div",[r("i",{staticClass:"el-icon-close",on:{click:function(n){return t.removeOrderLine(e._id)}}})])])})),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("div",{staticClass:"total"},[r("div",{staticClass:"type-fee"},[r("div",{staticStyle:{"text-align":"left"}},[r("div",{staticClass:"fee-detail"},[t._v("Subtotal")]),r("div",{staticClass:"fee-detail"},[t._v("Shipping")]),r("div",{staticClass:"fee-detail"},[t._v("Taxes (5%)")])]),r("div",{staticStyle:{"text-align":"right"}},[r("div",{staticClass:"fee-detail"},[t._v("$"+t._s(t.subTotal))]),r("div",{staticClass:"fee-detail"},[t._v("Free")]),r("div",{staticClass:"fee-detail"},[t._v(" $"+t._s((5*t.subTotal/100).toFixed(2))+" ")])])]),r("div",{staticClass:"sum"},[r("div",[t._v("TOTAL")]),r("div",[t._v("$"+t._s((105*t.subTotal/100).toFixed(2)))])]),r("el-button",{staticClass:"checkout",attrs:{type:"success"},on:{click:t.checkOut}},[t._v("Proceed to checkout")])],1)])],2):r("div",{staticStyle:{"font-size":"16px"}},[t._v(" There are no more items in your cart ")])])],1),r("div",{attrs:{id:"nav"}},[r("router-link",{attrs:{to:"/berries"}},[t._v("BERRIES")]),r("router-link",{attrs:{to:"/milk"}},[t._v("MILK, EGGS & CHEESE")]),r("router-link",{attrs:{to:"/vegetables"}},[t._v("VEGETABLES")]),r("router-link",{attrs:{to:"/nuts"}},[t._v("NUTS")]),r("router-link",{attrs:{to:"/cereals"}},[t._v("CEREALS")])],1),r("router-view")],1)},L=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"icon"},[r("img",{attrs:{src:n("07a6"),alt:""}})])}],P=n("1da1"),N=(n("96cf"),n("b680"),{data:function(){return{num:1,dialogTableVisible:!1}},methods:{toLoginPage:function(){var t=this;return Object(P["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$router.push("/login").catch((function(t){"NavigationDuplicated"===t.name||t.message.includes("Avoided redundant navigation to current location")||console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()},goBack:function(){var t=this;return Object(P["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$router.push("/").catch((function(t){"NavigationDuplicated"===t.name||t.message.includes("Avoided redundant navigation to current location")||console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()},checkOut:function(){var t=JSON.parse(localStorage.getItem("cus_accessToken"));t?this.$router.push("/order"):this.alertErr({message:"You must login to order!"}),this.dialogTableVisible=!1},removeOrderLine:function(t){this.$store.dispatch("removeOrderLine",t)},toOrderHistory:function(){var t=this;return Object(P["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$router.push("/history").catch((function(t){"NavigationDuplicated"===t.name||t.message.includes("Avoided redundant navigation to current location")||console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()},logOut:function(){var t=this;return Object(P["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$store.dispatch("logOut"),e.next=3,t.$router.push("/").catch((function(t){"NavigationDuplicated"===t.name||t.message.includes("Avoided redundant navigation to current location")||console.log(t)}));case 3:case"end":return e.stop()}}),e)})))()},alertErr:function(t){this.$message({showClose:!0,message:t.message||"Đã có lỗi xảy ra!",type:"error"})}},created:function(){console.log(this.cart)},computed:{cart:function(){return this.$store.state.cart},subTotal:function(){return this.$store.state.cart.map((function(t){return t.price*t.num})).reduce((function(t,e){return t+e}),0).toFixed(2)},customer:function(){return this.$store.state.customer}}}),j=N,A=(n("034f"),n("d84c"),Object(h["a"])(j,$,L,!1,null,"0cd81db8",null)),I=A.exports;r["default"].use(c.a,{locale:i.a}),r["default"].use(s,{load:{key:"AIzaSyAkK1Nj9HWtb4R0crJISga3j9hq2aBC8lQ",libraries:"places"}}),r["default"].config.productionTip=!1,new r["default"]({router:k,store:R,render:function(t){return t(I)}}).$mount("#app")},"6f07":function(t,e,n){},"85ec":function(t,e,n){},"901c":function(t,e,n){t.exports=n.p+"img/No_image_available.be940c4b.jpg"},"9b19":function(t,e,n){t.exports=n.p+"img/logo.3c85afcd.svg"},b8a9:function(t,e,n){"use strict";n("3d6d")},c000:function(t,e,n){t.exports=n.p+"img/bag.429534b5.png"},d84c:function(t,e,n){"use strict";n("6f07")}});
//# sourceMappingURL=app.581a2cd5.js.map